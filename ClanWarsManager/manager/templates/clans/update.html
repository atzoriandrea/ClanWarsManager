{% extends "base.html" %}

{% block content %}
    {% if removedUser is not None %}
        <p>Hai rimosso ----> {{ removedUser.username }}</p>
    {%endif%}
    {% if request.GET.created %}
        <p>Hai creato il tuo clan</p>
    {%endif%}
    <form method="POST">
        {% csrf_token %}
        {{form.as_p}}
        <p>
            <input type="submit" value="Save"/>
        </p>
    </form>

    <h4>Members:</h4>
    <ul>
        {% for member in clan.members.all %}
            <li>
                {% if clan.clanMaster == member%}
                    CM -
                {% endif %}
                {{member.username}}
                {% if clan.clanMaster != member %}
                    <form method="POST" action="{% url 'clans_kick' member.username%}">
                        {% csrf_token %}
                        <p>
                            <input type="submit" value="Remove"/>
                        </p>
                    </form>
                {% endif %}
            </li>
        {% endfor %}
    </ul>

    <form method="POST" action="{% url 'clans_delete'%}">
        {% csrf_token %}
        <p>
            <input type="submit" value="Delete Clan"/>
        </p>
    </form>
    

{% endblock %}


{% block toasts %}
{% if request.GET.kickedUsername is not None %}
{% include "commons/toast.html" with toast_msg="Hai rimosso "|add:request.GET.kickedUsername %}
{% endif %}
{% if request.GET.created %}
{% include "commons/toast.html" with toast_msg="Hai creato il clan" %}
{% endif %}
{% endblock %}